---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.svelte';
import Hero from '../components/Hero.svelte';
import StatCards from '../components/StatCards.svelte';
import ProcessTimeline from '../components/ProcessTimeline.svelte';
import FeatureSplit from '../components/FeatureSplit.svelte';
import SolutionSection from '../components/SolutionSection.svelte';
import DynamicNodes from '../components/DynamicNodes.svelte';
import Waitlist from '../components/Waitlist.svelte';
import Testimonials from '../components/Testimonials.svelte';
import '../styles/global.css';
---

<Layout title="Coresynq - Intelligence for the Green Economy">
	<Navbar client:load />
	<main>
		<Hero client:load />
        
        <!-- 1. The Why: Hidden Risk -->
        <div id="impact" class="bg-grid" data-reveal>
            <StatCards client:visible />
        </div>

        <!-- Enterprise Security -->
        <div id="solutions" class="bg-grid" data-reveal>
             <SolutionSection 
                client:visible
                title="Enterprise-Grade Security"
                subtitle="Trusted by Leaders"
                description="Built for the most demanding compliance standards. Trace every calculation back to its source with full audit logs and bank-grade data encryption."
                imageSrc="/feature_section_save_time_1771346992410.png"
                benefits={[
                    "SOC 2 Type II Certified",
                    "End-to-End Data Encryption",
                    "GDPR & CCPA Compliant"
                ]}
                useVisualComponent={true}
             />
        </div>

        <!-- 2. The Process: Path to Net Zero -->
        <div id="process" class="bg-grid" data-reveal>
            <ProcessTimeline client:visible />
        </div>

        <!-- 3. The Capability: Feature Deep Dives -->
        <div class="features-container bg-grid-soft">
            <div data-reveal>
                <FeatureSplit 
                    client:visible
                    title="Automated Data Ingestion"
                    description="Connect directly to your ERP, procurement systems, and energy meters. Coresynq automatically maps raw activity data to relevant emission factors, eliminating manual entry errors."
                    badge="Ingestion"
                    imageSrc="/dashboard_ui_mockup_1771348040250.png"
                    reverse={false}
                />
            </div>
            
            <div data-reveal>
                <FeatureSplit 
                    client:visible
                    title="Scientific Computation"
                    description="Move beyond spend-based estimates. Our engine uses verified physical activity factors and scientific models to calculate your true carbon footprint with audit-ready precision."
                    badge="Intelligence"
                    imageSrc="/scientific_dashboard_light.png" 
                    reverse={true}
                />
            </div>
            
            <div id="advisory" class="bg-mint-50 rounded-3xl mx-4 mb-16" data-reveal>
                <FeatureSplit 
                    client:visible
                    title="Strategic Advisory"
                    description="Data alone isn't enough. Our expert advisory team helps you interpret the numbers, identify decarbonization opportunities, and navigate complex credit markets."
                    badge="Strategy"
                    imageSrc="/strategic_report_ui.png"
                    reverse={false}
                />
            </div>
        </div>

        <!-- Testimonials -->
        <div data-reveal>
            <Testimonials client:visible />
        </div>

        <!-- Tech / How it works -->
		<div data-reveal><DynamicNodes client:visible /></div>
		
        <!-- Call to Action -->
		<div id="contact" data-reveal><Waitlist client:visible /></div>
	</main>
</Layout>

<script>
	// GSAP-enhanced scroll reveals
	async function initScrollReveals() {
		const { gsap } = await import("gsap");
		const { ScrollTrigger } = await import("gsap/ScrollTrigger");
		gsap.registerPlugin(ScrollTrigger);

		document.querySelectorAll('[data-reveal]').forEach(el => {
			gsap.fromTo(el,
				{ y: 40, opacity: 0 },
				{ y: 0, opacity: 1, duration: 0.8, ease: "power3.out",
				  scrollTrigger: { trigger: el, start: "top 88%" }
				}
			);
		});
	}
	
	initScrollReveals();
</script>

<style>
    .features-container {
        background-color: var(--page-bg);
        display: flex;
        flex-direction: column;
    }
</style>
